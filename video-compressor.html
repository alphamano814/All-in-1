<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO Meta Tags -->
  <title>Video Compressor | Free Online MP4 Compressor - Prabin's Toolbox</title>
  <meta name="description" content="Compress videos online for free with Prabin's Toolbox. Reduce MP4 file size instantly without losing quality — fast, private, and 100% browser-based.">
  <meta name="keywords" content="video compressor, mp4 compressor, reduce video size, compress mp4 online, free video compressor, webm compressor, online video resizer, video optimization">
  <meta name="author" content="Prabin's Toolbox">
  <link rel="canonical" href="https://www.prabinpokhrel1.com.np/video-compressor.html">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Video Compressor | Free Online MP4 Compressor - Prabin's Toolbox">
  <meta property="og:description" content="Free online video compressor to reduce file size instantly in your browser. No signup, no watermark, no upload.">
  <meta property="og:image" content="https://www.prabinpokhrel1.com.np/assets/video-compressor-preview.png">
  <meta property="og:url" content="https://www.prabinpokhrel1.com.np/video-compressor.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="All-in-One Tools by Prabin">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Free Online Video Compressor - Prabin's Toolbox">
  <meta name="twitter:description" content="Compress MP4, WebM, or MOV videos online instantly — free, fast, and private.">
  <meta name="twitter:image" content="https://www.prabinpokhrel1.com.np/assets/video-compressor-preview.png">
  <meta name="twitter:creator" content="@prabinpokhrel">
  
  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- FFmpeg.wasm -->
  <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.11.6/dist/ffmpeg.min.js"></script>
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Video Compressor",
    "description": "Compress videos online for free with Prabin's Toolbox. Reduce MP4 file size instantly without losing quality — fast, private, and 100% browser-based.",
    "url": "https://www.prabinpokhrel1.com.np/video-compressor.html",
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "Any",
    "permissions": "none",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Person",
      "name": "Prabin Pokhrel"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Prabin's Toolbox"
    }
  }
  </script>
   <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7081789084626782"
     crossorigin="anonymous"></script>
  
  <style>
    /* --------- RESET & VARIABLES --------- */
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
      font-family: "Poppins", sans-serif; 
      transition: background-color 0.3s, color 0.3s;
    }

    :root {
      --primary: #38bdf8;
      --primary-dark: #0ea5e9;
      --secondary: #f472b6;
      --accent: #a78bfa;
      --bg: #0f172a;
      --bg-light: #1e293b;
      --bg-lighter: #334155;
      --text: #f1f5f9;
      --text-muted: #94a3b8;
      --card-bg: rgba(255, 255, 255, 0.05);
      --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --border: rgba(255, 255, 255, 0.1);
      --success: #10b981;
      --error: #ef4444;
    }

    .light-mode {
      --bg: #f8fafc;
      --bg-light: #e2e8f0;
      --bg-lighter: #cbd5e1;
      --text: #0f172a;
      --text-muted: #475569;
      --card-bg: rgba(255, 255, 255, 0.8);
      --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
      --border: rgba(0, 0, 0, 0.1);
    }

    body {
      background: linear-gradient(135deg, var(--bg), var(--bg-light));
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background 0.5s ease;
      padding: 0 1rem;
    }

    /* --------- HEADER & NAVIGATION --------- */
    header {
      width: 100%;
      padding: 1.5rem 1rem;
      text-align: center;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
      position: relative;
      z-index: 100;
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo i {
      font-size: 2.5rem;
      color: var(--primary);
      animation: rotate 10s linear infinite;
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .logo h1 {
      font-size: 2rem;
      color: var(--primary);
      letter-spacing: 1px;
    }

    .logo p {
      margin-top: 0.5rem;
      color: var(--text-muted);
      font-size: 1rem;
    }

    .theme-toggle {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 50px;
      width: 60px;
      height: 30px;
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      padding: 0 5px;
      transition: all 0.3s ease;
    }

    .theme-toggle:hover {
      transform: scale(1.05);
    }

    .theme-toggle i {
      position: absolute;
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }

    .theme-toggle .fa-sun {
      color: #f59e0b;
      opacity: 0;
    }

    .theme-toggle .fa-moon {
      color: #94a3b8;
    }

    .light-mode .theme-toggle .fa-sun {
      opacity: 1;
    }

    .light-mode .theme-toggle .fa-moon {
      opacity: 0;
    }

    .theme-toggle::after {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--primary);
      transition: all 0.3s ease;
      left: 4px;
    }

    .light-mode .theme-toggle::after {
      left: calc(100% - 26px);
      background: #f59e0b;
    }

    /* --------- MAIN CONTENT --------- */
    main {
      max-width: 1200px;
      width: 100%;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .tool-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--card-shadow);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      margin-bottom: 2rem;
      animation: fadeIn 0.8s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .card-header h1 {
      font-size: 1.8rem;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }

    .card-header p {
      color: var(--text-muted);
    }

    .card-header i {
      font-size: 3rem;
      color: var(--primary);
      margin-bottom: 1rem;
    }

    /* --------- UPLOAD AREA --------- */
    .upload-area {
      border: 2px dashed var(--border);
      border-radius: 10px;
      padding: 3rem 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 2rem;
      background: var(--bg-light);
    }

    .upload-area:hover {
      border-color: var(--primary);
      background: var(--bg-lighter);
    }

    .upload-area.active {
      border-color: var(--success);
      background: rgba(16, 185, 129, 0.1);
    }

    .upload-icon {
      font-size: 3rem;
      color: var(--primary);
      margin-bottom: 1rem;
    }

    .upload-text h3 {
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
      color: var(--text);
    }

    .upload-text p {
      color: var(--text-muted);
      margin-bottom: 1rem;
    }

    .upload-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .upload-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
    }

    #fileInput {
      display: none;
    }

    .file-info {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    /* --------- VIDEO INFO SECTION --------- */
    .video-info-section {
      display: none;
      margin-bottom: 2rem;
    }

    .video-info-section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .section-title {
      font-size: 1.3rem;
      color: var(--primary);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .video-details {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 1.5rem;
      border: 1px solid var(--border);
      margin-bottom: 1.5rem;
    }

    .video-details-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
    }

    .video-detail {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .video-detail label {
      font-weight: 500;
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .video-detail span {
      color: var(--text);
      font-size: 1rem;
    }

    .video-preview {
      width: 100%;
      text-align: center;
    }

    .video-preview video {
      width: 100%;
      max-width: 500px;
      border-radius: 8px;
    }

    /* --------- COMPRESSION OPTIONS --------- */
    .compression-section {
      display: none;
      margin-bottom: 2rem;
    }

    .compression-section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .compression-container {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 1.5rem;
      border: 1px solid var(--border);
    }

    .compression-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .option-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .option-group label {
      font-weight: 500;
      color: var(--text);
    }

    .option-group select,
    .option-group input {
      padding: 0.8rem;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--bg-lighter);
      color: var(--text);
    }

    .quality-presets {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
    }

    .quality-preset {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      flex: 1;
      min-width: 120px;
    }

    .quality-preset:hover {
      background: var(--primary);
      transform: translateY(-3px);
    }

    .quality-preset.active {
      background: var(--primary);
      border-color: var(--primary);
    }

    .quality-preset i {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .quality-preset span {
      font-size: 0.9rem;
      text-align: center;
    }

    .compression-estimate {
      background: var(--bg-lighter);
      border-radius: 8px;
      padding: 1rem;
      margin-top: 1rem;
    }

    .estimate-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .estimate-label {
      color: var(--text-muted);
    }

    .estimate-value {
      color: var(--text);
      font-weight: 500;
    }

    .savings {
      color: var(--success);
    }

    .action-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin-top: 1.5rem;
    }

    .action-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .action-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
    }

    .action-btn.secondary {
      background: var(--bg-light);
      color: var(--text);
    }

    .action-btn.secondary:hover {
      background: var(--bg-lighter);
    }

    /* --------- PROCESSING SECTION --------- */
    .processing-section {
      display: none;
      margin-bottom: 2rem;
      text-align: center;
    }

    .processing-section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .progress-container {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 2rem;
      border: 1px solid var(--border);
      margin-bottom: 1.5rem;
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .progress-label {
      font-weight: 500;
      color: var(--text);
    }

    .progress-percentage {
      color: var(--primary);
      font-weight: 600;
    }

    .progress-bar {
      height: 10px;
      background: var(--bg-lighter);
      border-radius: 5px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--primary);
      border-radius: 5px;
      width: 0%;
      transition: width 0.3s ease;
    }

    .processing-text {
      margin-top: 1rem;
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* --------- RESULT SECTION --------- */
    .result-section {
      display: none;
      text-align: center;
    }

    .result-section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .result-container {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 2rem;
      border: 1px solid var(--border);
      margin-bottom: 1.5rem;
    }

    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    @media (max-width: 768px) {
      .comparison {
        grid-template-columns: 1fr;
      }
    }

    .comparison-item {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .comparison-title {
      font-weight: 500;
      color: var(--text);
    }

    .comparison-video {
      width: 100%;
      border-radius: 8px;
    }

    .comparison-video video {
      width: 100%;
      max-width: 300px;
      border-radius: 8px;
    }

    .file-stats {
      display: flex;
      justify-content: space-between;
      margin-top: 0.5rem;
    }

    .file-stat {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .file-stat-label {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .file-stat-value {
      font-weight: 500;
      color: var(--text);
    }

    .file-stat-savings {
      color: var(--success);
    }

    .download-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin-top: 1.5rem;
    }

    .download-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .download-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
    }

    .download-btn.secondary {
      background: var(--bg-light);
      color: var(--text);
    }

    .download-btn.secondary:hover {
      background: var(--bg-lighter);
    }

    /* --------- CONTENT SECTIONS --------- */
    .content-section {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--card-shadow);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      margin-bottom: 2rem;
    }

    .content-section h2 {
      font-size: 1.5rem;
      color: var(--primary);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .content-section h3 {
      font-size: 1.2rem;
      color: var(--secondary);
      margin: 1.5rem 0 0.5rem;
    }

    .content-section p {
      color: var(--text);
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .content-section ul {
      padding-left: 1.5rem;
      margin-bottom: 1rem;
    }

    .content-section li {
      color: var(--text);
      line-height: 1.6;
      margin-bottom: 0.5rem;
    }

    .faq-item {
      margin-bottom: 1.5rem;
      border-bottom: 1px solid var(--border);
      padding-bottom: 1.5rem;
    }

    .faq-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .tool-links {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
    }

    .tool-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1.5rem;
      background: var(--card-bg);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .tool-link:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-3px);
    }

    /* --------- BACK BUTTON --------- */
    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1.5rem;
      background: var(--card-bg);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      margin-top: 1rem;
    }

    .back-btn:hover {
      background: var(--primary);
      color: white;
      transform: translateX(-5px);
    }

    /* --------- FOOTER --------- */
    footer {
      padding: 2rem 1rem;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.9rem;
      border-top: 1px solid var(--border);
      width: 100%;
      margin-top: auto;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }

    .footer-links {
      display: flex;
      gap: 2rem;
      margin-top: 1rem;
    }

    .footer-links a {
      color: var(--text-muted);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: var(--primary);
    }

    /* --------- RESPONSIVE DESIGN --------- */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 1rem;
      }

      .video-details-grid {
        grid-template-columns: 1fr;
      }

      .compression-options {
        grid-template-columns: 1fr;
      }

      .quality-presets {
        flex-direction: column;
      }

      .action-buttons {
        flex-direction: column;
        align-items: center;
      }

      .action-btn {
        width: 100%;
        max-width: 300px;
      }

      .download-buttons {
        flex-direction: column;
        align-items: center;
      }

      .download-btn {
        width: 100%;
        max-width: 300px;
      }
    }

    @media (max-width: 480px) {
      .footer-links {
        flex-direction: column;
        gap: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="logo">
        <i class="fas fa-toolbox" aria-hidden="true"></i>
        <div>
          <h1>All-in-One Tools</h1>
          <p>50+ useful tools for your everyday needs</p>
        </div>
      </div>
      <div class="theme-toggle" id="themeToggle" aria-label="Toggle dark/light mode" role="button" tabindex="0">
        <i class="fas fa-sun" aria-hidden="true"></i>
        <i class="fas fa-moon" aria-hidden="true"></i>
      </div>
    </div>
  </header>

  <main>
    <article>
      <div class="tool-card">
        <div class="card-header">
          <i class="fas fa-compress-alt" aria-hidden="true"></i>
          <h1>Video Compressor</h1>
          <p>Reduce video file size without losing quality</p>
        </div>

        <!-- Upload Section -->
        <div class="upload-area" id="uploadArea">
          <div class="upload-icon">
            <i class="fas fa-cloud-upload-alt"></i>
          </div>
          <div class="upload-text">
            <h3>Upload Your Video</h3>
            <p>Drag & drop your video file here or click to browse</p>
            <p class="file-info">Supports: MP4, WebM, MOV, AVI (Max: 100MB)</p>
          </div>
          <button class="upload-btn" id="uploadBtn">
            <i class="fas fa-folder-open"></i> Choose Video File
          </button>
          <input type="file" id="fileInput" accept=".mp4,.webm,.mov,.avi,.mkv">
        </div>

        <!-- Video Info Section -->
        <div class="video-info-section" id="videoInfoSection">
          <h2 class="section-title">
            <i class="fas fa-info-circle"></i> Video Details
          </h2>
          <div class="video-details">
            <div class="video-details-grid">
              <div class="video-detail">
                <label>File Name</label>
                <span id="fileName">-</span>
              </div>
              <div class="video-detail">
                <label>File Size</label>
                <span id="fileSize">-</span>
              </div>
              <div class="video-detail">
                <label>Duration</label>
                <span id="fileDuration">-</span>
              </div>
              <div class="video-detail">
                <label>Format</label>
                <span id="fileFormat">-</span>
              </div>
            </div>
          </div>
          <div class="video-preview">
            <video id="videoPreview" controls>
              Your browser does not support the video element.
            </video>
          </div>
        </div>

        <!-- Compression Section -->
        <div class="compression-section" id="compressionSection">
          <h2 class="section-title">
            <i class="fas fa-cog"></i> Compression Settings
          </h2>
          <div class="compression-container">
            <div class="compression-options">
              <div class="option-group">
                <label for="outputFormat">Output Format</label>
                <select id="outputFormat">
                  <option value="mp4" selected>MP4</option>
                  <option value="webm">WebM</option>
                  <option value="mov">MOV</option>
                </select>
              </div>
              <div class="option-group">
                <label for="compressionLevel">Compression Level</label>
                <select id="compressionLevel">
                  <option value="low">Low Compression (High Quality)</option>
                  <option value="medium" selected>Medium Compression</option>
                  <option value="high">High Compression (Smaller File)</option>
                </select>
              </div>
              <div class="option-group">
                <label for="resolution">Resolution</label>
                <select id="resolution">
                  <option value="original">Original Resolution</option>
                  <option value="1080">1080p (Full HD)</option>
                  <option value="720">720p (HD)</option>
                  <option value="480">480p (SD)</option>
                  <option value="360">360p</option>
                </select>
              </div>
            </div>

            <div class="quality-presets">
              <div class="quality-preset" data-preset="low">
                <i class="fas fa-film"></i>
                <span>High Quality</span>
                <small>~80% of original</small>
              </div>
              <div class="quality-preset active" data-preset="medium">
                <i class="fas fa-balance-scale"></i>
                <span>Balanced</span>
                <small>~50% of original</small>
              </div>
              <div class="quality-preset" data-preset="high">
                <i class="fas fa-file-export"></i>
                <span>Maximum Compression</span>
                <small>~30% of original</small>
              </div>
            </div>

            <div class="compression-estimate">
              <div class="estimate-item">
                <span class="estimate-label">Original Size:</span>
                <span class="estimate-value" id="originalSize">-</span>
              </div>
              <div class="estimate-item">
                <span class="estimate-label">Estimated Size:</span>
                <span class="estimate-value" id="estimatedSize">-</span>
              </div>
              <div class="estimate-item">
                <span class="estimate-label">Estimated Savings:</span>
                <span class="estimate-value savings" id="estimatedSavings">-</span>
              </div>
            </div>

            <div class="action-buttons">
              <button class="action-btn" id="compressBtn">
                <i class="fas fa-compress-arrows-alt"></i> Compress Video
              </button>
              <button class="action-btn secondary" id="resetBtn">
                <i class="fas fa-redo"></i> Reset Settings
              </button>
            </div>
          </div>
        </div>

        <!-- Processing Section -->
        <div class="processing-section" id="processingSection">
          <h2 class="section-title">
            <i class="fas fa-sync fa-spin"></i> Compressing Video
          </h2>
          <div class="progress-container">
            <div class="progress-info">
              <span class="progress-label">Compression Progress</span>
              <span class="progress-percentage" id="progressPercentage">0%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="processing-text" id="processingText">Initializing FFmpeg...</p>
          </div>
        </div>

        <!-- Result Section -->
        <div class="result-section" id="resultSection">
          <h2 class="section-title">
            <i class="fas fa-check-circle"></i> Compression Complete
          </h2>
          <div class="result-container">
            <div class="comparison">
              <div class="comparison-item">
                <div class="comparison-title">Original Video</div>
                <div class="comparison-video">
                  <video id="originalVideo" controls>
                    Your browser does not support the video element.
                  </video>
                </div>
                <div class="file-stats">
                  <div class="file-stat">
                    <span class="file-stat-label">Size</span>
                    <span class="file-stat-value" id="originalFileSize">-</span>
                  </div>
                  <div class="file-stat">
                    <span class="file-stat-label">Duration</span>
                    <span class="file-stat-value" id="originalDuration">-</span>
                  </div>
                </div>
              </div>
              <div class="comparison-item">
                <div class="comparison-title">Compressed Video</div>
                <div class="comparison-video">
                  <video id="compressedVideo" controls>
                    Your browser does not support the video element.
                  </video>
                </div>
                <div class="file-stats">
                  <div class="file-stat">
                    <span class="file-stat-label">Size</span>
                    <span class="file-stat-value" id="compressedFileSize">-</span>
                  </div>
                  <div class="file-stat">
                    <span class="file-stat-label">Savings</span>
                    <span class="file-stat-value file-stat-savings" id="actualSavings">-</span>
                  </div>
                </div>
              </div>
            </div>
            <p>Your video has been compressed successfully! Compare the results above.</p>
          </div>
          <div class="download-buttons">
            <button class="download-btn" id="downloadBtn">
              <i class="fas fa-download"></i> Download Compressed Video
            </button>
            <button class="download-btn secondary" id="compressAnotherBtn">
              <i class="fas fa-redo"></i> Compress Another Video
            </button>
          </div>
        </div>

        <a href="index.html" class="back-btn">
          <i class="fas fa-arrow-left" aria-hidden="true"></i> Back to Home
        </a>
      </div>
    </article>

    <section class="content-section">
      <h2><i class="fas fa-info-circle" aria-hidden="true"></i> About This Video Compressor</h2>
      <p>Our Free Video Compressor is a powerful online tool that allows you to reduce video file sizes without sacrificing quality. Whether you need to compress videos for email, social media, or storage optimization, this tool makes it easy and efficient.</p>
      
      <h3>How to Use the Video Compressor</h3>
      <p>Compressing your video is simple:</p>
      <ul>
        <li>Upload your video file by dragging and dropping or using the file browser</li>
        <li>Review the video details and adjust compression settings as needed</li>
        <li>Choose your preferred compression level and output format</li>
        <li>Click "Compress Video" to start the compression process</li>
        <li>Wait for the compression to complete (this may take a few moments)</li>
        <li>Compare the original and compressed videos, then download the result</li>
      </ul>
      
      <h3>Key Features</h3>
      <p>Our video compressor offers a comprehensive set of features:</p>
      <ul>
        <li><strong>Multiple Format Support:</strong> Compress MP4, WebM, MOV, and AVI files</li>
        <li><strong>Quality Presets:</strong> Choose from High Quality, Balanced, or Maximum Compression</li>
        <li><strong>Resolution Options:</strong> Maintain original resolution or downscale to save space</li>
        <li><strong>Size Estimation:</strong> See estimated file size before compression</li>
        <li><strong>Side-by-Side Comparison:</strong> Compare original and compressed videos</li>
        <li><strong>Privacy Focused:</strong> All processing happens in your browser - no server uploads</li>
      </ul>
      
      <h3>Other Useful Tools</h3>
      <p>Explore more helpful utilities in our toolbox:</p>
      <div class="tool-links">
        <a href="audio-cutter.html" class="tool-link" aria-label="Audio Cutter">
          <i class="fas fa-cut" aria-hidden="true"></i> Audio Cutter
        </a>
        <a href="video-to-mp3.html" class="tool-link" aria-label="Video to MP3">
          <i class="fas fa-file-audio" aria-hidden="true"></i> Video to MP3
        </a>
        <a href="image-cropper.html" class="tool-link" aria-label="Image Cropper">
          <i class="fas fa-crop-alt" aria-hidden="true"></i> Image Cropper
        </a>
        <a href="index.html" class="tool-link" aria-label="All Tools">
          <i class="fas fa-tools" aria-hidden="true"></i> All Tools
        </a>
      </div>
    </section>

    <section class="content-section">
      <h2><i class="fas fa-question-circle" aria-hidden="true"></i> Frequently Asked Questions</h2>
      
      <div class="faq-item">
        <h3>What video formats can I compress with this tool?</h3>
        <p>You can upload MP4, WebM, MOV, and AVI video files. The tool will process them in your browser and allow you to download the compressed result in MP4, WebM, or MOV format.</p>
      </div>
      
      <div class="faq-item">
        <h3>Is there a file size limit for uploaded videos?</h3>
        <p>The maximum file size for uploads is 100MB. For best results, we recommend using videos that are under 5 minutes in length for faster compression.</p>
      </div>
      
      <div class="faq-item">
        <h3>How much can I reduce my video file size?</h3>
        <p>Depending on your compression settings, you can typically reduce video file sizes by 30-70% while maintaining good visual quality. Higher compression levels result in smaller files but may affect quality.</p>
      </div>
      
      <div class="faq-item">
        <h3>Does the video compressor work on mobile devices?</h3>
        <p>Yes, our video compressor is fully responsive and works on all devices including smartphones and tablets. However, processing large files on mobile devices may be slower.</p>
      </div>
      
      <div class="faq-item">
        <h3>Are my videos uploaded to a server?</h3>
        <p>No, all video processing happens directly in your browser using FFmpeg.wasm. Your videos are never uploaded to any server, ensuring complete privacy and security.</p>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <p>© 2025 Prabin's Toolbox | All Rights Reserved</p>
      <div class="footer-links">
        <a href="privacy-policy.html">Privacy Policy</a>
        <a href="terms-of-service.html">Terms of Service</a>
        <a href="contact.html">Contact Us</a>
      </div>
    </div>
  </footer>

  <script>
    // ---------- DOM ELEMENTS ----------
    const uploadArea = document.getElementById('uploadArea');
    const uploadBtn = document.getElementById('uploadBtn');
    const fileInput = document.getElementById('fileInput');
    const videoInfoSection = document.getElementById('videoInfoSection');
    const compressionSection = document.getElementById('compressionSection');
    const processingSection = document.getElementById('processingSection');
    const resultSection = document.getElementById('resultSection');
    const fileName = document.getElementById('fileName');
    const fileSize = document.getElementById('fileSize');
    const fileDuration = document.getElementById('fileDuration');
    const fileFormat = document.getElementById('fileFormat');
    const videoPreview = document.getElementById('videoPreview');
    const originalSize = document.getElementById('originalSize');
    const estimatedSize = document.getElementById('estimatedSize');
    const estimatedSavings = document.getElementById('estimatedSavings');
    const compressBtn = document.getElementById('compressBtn');
    const resetBtn = document.getElementById('resetBtn');
    const progressPercentage = document.getElementById('progressPercentage');
    const progressFill = document.getElementById('progressFill');
    const processingText = document.getElementById('processingText');
    const originalVideo = document.getElementById('originalVideo');
    const compressedVideo = document.getElementById('compressedVideo');
    const originalFileSize = document.getElementById('originalFileSize');
    const originalDuration = document.getElementById('originalDuration');
    const compressedFileSize = document.getElementById('compressedFileSize');
    const actualSavings = document.getElementById('actualSavings');
    const downloadBtn = document.getElementById('downloadBtn');
    const compressAnotherBtn = document.getElementById('compressAnotherBtn');
    const outputFormat = document.getElementById('outputFormat');
    const compressionLevel = document.getElementById('compressionLevel');
    const resolution = document.getElementById('resolution');
    const qualityPresets = document.querySelectorAll('.quality-preset');

    // ---------- VARIABLES ----------
    let uploadedFile = null;
    let originalFileSizeBytes = 0;
    let videoDuration = 0;
    let compressedVideoUrl = null;
    let ffmpeg = null;
    let isFFmpegLoaded = false;

    // ---------- EVENT LISTENERS ----------
    function initializeEventListeners() {
      // Upload button click
      uploadBtn.addEventListener('click', () => fileInput.click());
      
      // File input change
      fileInput.addEventListener('change', handleFileUpload);
      
      // Drag and drop
      uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('active');
      });
      
      uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('active');
      });
      
      uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('active');
        
        if (e.dataTransfer.files.length) {
          fileInput.files = e.dataTransfer.files;
          handleFileUpload();
        }
      });
      
      // Quality presets
      qualityPresets.forEach(preset => {
        preset.addEventListener('click', () => {
          qualityPresets.forEach(p => p.classList.remove('active'));
          preset.classList.add('active');
          compressionLevel.value = preset.dataset.preset;
          updateCompressionEstimate();
        });
      });
      
      // Compression level change
      compressionLevel.addEventListener('change', updateCompressionEstimate);
      
      // Resolution change
      resolution.addEventListener('change', updateCompressionEstimate);
      
      // Output format change
      outputFormat.addEventListener('change', updateCompressionEstimate);
      
      // Action buttons
      compressBtn.addEventListener('click', compressVideo);
      resetBtn.addEventListener('click', resetSettings);
      
      // Download buttons
      downloadBtn.addEventListener('click', downloadVideo);
      compressAnotherBtn.addEventListener('click', resetCompressor);
      
      // Initialize FFmpeg
      initializeFFmpeg();
    }

    // ---------- FILE UPLOAD ----------
    function handleFileUpload() {
      const file = fileInput.files[0];
      
      if (!file) return;
      
      // Check file type
      const validTypes = ['video/mp4', 'video/webm', 'video/quicktime', 'video/x-msvideo', 'video/x-matroska'];
      if (!validTypes.includes(file.type)) {
        alert('Please upload a valid video file (MP4, WebM, MOV, AVI, or MKV).');
        return;
      }
      
      // Check file size (100MB max)
      if (file.size > 100 * 1024 * 1024) {
        alert('File size must be less than 100MB.');
        return;
      }
      
      uploadedFile = file;
      originalFileSizeBytes = file.size;
      
      // Get video duration
      getVideoDuration(file).then(duration => {
        videoDuration = duration;
        
        // Update file info
        updateFileInfo(file, duration);
        
        // Update compression estimate
        updateCompressionEstimate();
        
        // Show video info and compression sections
        videoInfoSection.classList.add('active');
        compressionSection.classList.add('active');
        
        // Update upload area text
        const uploadText = uploadArea.querySelector('.upload-text h3');
        uploadText.textContent = 'Video Uploaded Successfully!';
        uploadArea.querySelector('.upload-text p').textContent = 'Your video is ready for compression';
      }).catch(error => {
        console.error('Error getting video duration:', error);
        // Still show the file info with unknown duration
        updateFileInfo(file, 0);
        videoInfoSection.classList.add('active');
        compressionSection.classList.add('active');
        
        const uploadText = uploadArea.querySelector('.upload-text h3');
        uploadText.textContent = 'Video Uploaded Successfully!';
        uploadArea.querySelector('.upload-text p').textContent = 'Your video is ready for compression';
      });
    }

    function getVideoDuration(file) {
      return new Promise((resolve, reject) => {
        const video = document.createElement('video');
        video.preload = 'metadata';
        
        video.onloadedmetadata = function() {
          window.URL.revokeObjectURL(video.src);
          resolve(video.duration);
        };
        
        video.onerror = function() {
          reject(new Error('Failed to load video metadata'));
        };
        
        video.src = URL.createObjectURL(file);
      });
    }

    function updateFileInfo(file, duration) {
      fileName.textContent = file.name;
      fileSize.textContent = formatFileSize(file.size);
      fileDuration.textContent = formatDuration(duration);
      fileFormat.textContent = file.type.split('/')[1].toUpperCase();
      
      // Set video preview source
      videoPreview.src = URL.createObjectURL(file);
      originalVideo.src = URL.createObjectURL(file);
      
      // Update original size display
      originalSize.textContent = formatFileSize(file.size);
      originalFileSize.textContent = formatFileSize(file.size);
      originalDuration.textContent = formatDuration(duration);
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    function formatDuration(seconds) {
      if (seconds === 0) return 'Unknown';
      
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    // ---------- COMPRESSION ESTIMATION ----------
    function updateCompressionEstimate() {
      if (!uploadedFile) return;
      
      const compressionLevelValue = compressionLevel.value;
      const resolutionValue = resolution.value;
      
      // Calculate base compression ratio based on compression level
      let compressionRatio;
      switch (compressionLevelValue) {
        case 'low':
          compressionRatio = 0.8; // 80% of original size
          break;
        case 'medium':
          compressionRatio = 0.5; // 50% of original size
          break;
        case 'high':
          compressionRatio = 0.3; // 30% of original size
          break;
        default:
          compressionRatio = 0.5;
      }
      
      // Adjust for resolution change if not original
      if (resolutionValue !== 'original') {
        const resolutionMultiplier = {
          '1080': 0.7,
          '720': 0.5,
          '480': 0.3,
          '360': 0.2
        };
        compressionRatio *= resolutionMultiplier[resolutionValue] || 1;
      }
      
      const estimatedSizeBytes = originalFileSizeBytes * compressionRatio;
      const savingsBytes = originalFileSizeBytes - estimatedSizeBytes;
      const savingsPercentage = (savingsBytes / originalFileSizeBytes) * 100;
      
      estimatedSize.textContent = formatFileSize(estimatedSizeBytes);
      estimatedSavings.textContent = `${savingsPercentage.toFixed(0)}% (${formatFileSize(savingsBytes)})`;
    }

    // ---------- FFMPEG INITIALIZATION ----------
    async function initializeFFmpeg() {
      try {
        processingText.textContent = 'Loading FFmpeg...';
        
        // Create FFmpeg instance
        ffmpeg = new FFmpeg();
        
        // Load FFmpeg
        await ffmpeg.load();
        
        isFFmpegLoaded = true;
        processingText.textContent = 'FFmpeg loaded successfully!';
        
        console.log('FFmpeg loaded successfully');
      } catch (error) {
        console.error('Error loading FFmpeg:', error);
        processingText.textContent = 'Failed to load FFmpeg. Please refresh the page.';
      }
    }

    // ---------- VIDEO COMPRESSION ----------
    async function compressVideo() {
      if (!uploadedFile || !isFFmpegLoaded) {
        alert('Please upload a video file and wait for FFmpeg to load.');
        return;
      }
      
      // Show processing section
      processingSection.classList.add('active');
      compressionSection.classList.remove('active');
      
      try {
        // Reset progress
        updateProgress(0, 'Starting video compression...');
        
        // Write the video file to FFmpeg's virtual file system
        const inputName = 'input.' + uploadedFile.name.split('.').pop();
        const outputName = 'output.' + outputFormat.value;
        
        const data = await uploadedFile.arrayBuffer();
        await ffmpeg.writeFile(inputName, new Uint8Array(data));
        
        updateProgress(20, 'Processing video file...');
        
        // Build FFmpeg command based on settings
        const compressionLevelValue = compressionLevel.value;
        const resolutionValue = resolution.value;
        
        let ffmpegArgs = ['-i', inputName];
        
        // Add compression settings based on compression level
        switch (compressionLevelValue) {
          case 'low':
            ffmpegArgs.push('-crf', '23', '-preset', 'medium');
            break;
          case 'medium':
            ffmpegArgs.push('-crf', '28', '-preset', 'slow');
            break;
          case 'high':
            ffmpegArgs.push('-crf', '32', '-preset', 'veryslow');
            break;
        }
        
        // Add resolution settings if not original
        if (resolutionValue !== 'original') {
          ffmpegArgs.push('-vf', `scale=-2:${resolutionValue}`);
        }
        
        // Add output format
        if (outputFormat.value === 'mp4') {
          ffmpegArgs.push('-c:v', 'libx264', '-c:a', 'aac', '-f', 'mp4');
        } else if (outputFormat.value === 'webm') {
          ffmpegArgs.push('-c:v', 'libvpx-vp9', '-c:a', 'libopus', '-f', 'webm');
        } else if (outputFormat.value === 'mov') {
          ffmpegArgs.push('-c:v', 'libx264', '-c:a', 'aac', '-f', 'mov');
        }
        
        ffmpegArgs.push(outputName);
        
        updateProgress(50, 'Compressing video...');
        
        // Execute FFmpeg command
        await ffmpeg.exec(ffmpegArgs);
        
        updateProgress(80, 'Finalizing compressed video...');
        
        // Read the output file
        const outputData = await ffmpeg.readFile(outputName);
        
        updateProgress(95, 'Creating download link...');
        
        // Create blob URL for the video
        const videoBlob = new Blob([outputData.buffer], { 
          type: outputFormat.value === 'mp4' ? 'video/mp4' : 
                outputFormat.value === 'webm' ? 'video/webm' : 'video/quicktime'
        });
        
        compressedVideoUrl = URL.createObjectURL(videoBlob);
        
        // Set compressed video source
        compressedVideo.src = compressedVideoUrl;
        
        // Update file stats
        compressedFileSize.textContent = formatFileSize(videoBlob.size);
        
        const savingsBytes = originalFileSizeBytes - videoBlob.size;
        const savingsPercentage = (savingsBytes / originalFileSizeBytes) * 100;
        actualSavings.textContent = `${savingsPercentage.toFixed(0)}%`;
        
        updateProgress(100, 'Compression complete!');
        
        // Show result section after a short delay
        setTimeout(() => {
          processingSection.classList.remove('active');
          resultSection.classList.add('active');
        }, 1000);
        
      } catch (error) {
        console.error('Compression error:', error);
        updateProgress(0, `Compression failed: ${error.message}`);
        alert('Video compression failed. Please try again with a different video file.');
      }
    }

    function updateProgress(percent, message) {
      progressPercentage.textContent = `${percent}%`;
      progressFill.style.width = `${percent}%`;
      processingText.textContent = message;
    }

    // ---------- DOWNLOAD FUNCTIONS ----------
    function downloadVideo() {
      if (!compressedVideoUrl) return;
      
      const link = document.createElement('a');
      link.href = compressedVideoUrl;
      link.download = `compressed-video.${outputFormat.value}`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    function resetSettings() {
      // Reset to default settings
      outputFormat.value = 'mp4';
      compressionLevel.value = 'medium';
      resolution.value = 'original';
      
      // Update active preset
      qualityPresets.forEach(preset => {
        preset.classList.remove('active');
        if (preset.dataset.preset === 'medium') {
          preset.classList.add('active');
        }
      });
      
      // Update compression estimate
      updateCompressionEstimate();
    }

    function resetCompressor() {
      // Reset all sections
      videoInfoSection.classList.remove('active');
      compressionSection.classList.remove('active');
      processingSection.classList.remove('active');
      resultSection.classList.remove('active');
      
      // Reset file input
      fileInput.value = '';
      uploadedFile = null;
      
      // Reset upload area text
      const uploadText = uploadArea.querySelector('.upload-text h3');
      uploadText.textContent = 'Upload Your Video';
      uploadArea.querySelector('.upload-text p').textContent = 'Drag & drop your video file here or click to browse';
      
      // Clear compressed video URL
      if (compressedVideoUrl) {
        URL.revokeObjectURL(compressedVideoUrl);
        compressedVideoUrl = null;
      }
      
      // Reset video previews
      videoPreview.src = '';
      originalVideo.src = '';
      compressedVideo.src = '';
      
      // Reset progress
      updateProgress(0, 'Initializing FFmpeg...');
      
      // Reset settings
      resetSettings();
    }

    // ---------- THEME TOGGLE ----------
    const themeToggle = document.getElementById("themeToggle");
    const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");
    
    // Check for saved theme preference or use device preference
    const currentTheme = localStorage.getItem("theme") || 
                        (prefersDarkScheme.matches ? "dark" : "light");
    
    if (currentTheme === "light") {
      document.body.classList.add("light-mode");
    }
    
    themeToggle.addEventListener("click", () => {
      document.body.classList.toggle("light-mode");
      
      // Save theme preference
      const theme = document.body.classList.contains("light-mode") ? "light" : "dark";
      localStorage.setItem("theme", theme);
    });
    
    themeToggle.addEventListener("keypress", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        document.body.classList.toggle("light-mode");
        
        // Save theme preference
        const theme = document.body.classList.contains("light-mode") ? "light" : "dark";
        localStorage.setItem("theme", theme);
      }
    });

    // ---------- INITIALIZATION ----------
    function initializeVideoCompressor() {
      initializeEventListeners();
    }

    // Initialize the video compressor when the page loads
    document.addEventListener('DOMContentLoaded', initializeVideoCompressor);
  </script>
</body>
</html>
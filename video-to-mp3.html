<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO Meta Tags -->
  <title>Video to MP3 Converter | Free Online Audio Extractor - Prabin's Toolbox</title>
  <meta name="description" content="Convert video to MP3 instantly with Prabin's Toolbox. Extract high-quality audio from videos online for free — no signup or software required.">
  <meta name="keywords" content="video to mp3, mp4 to mp3, convert video to audio, extract mp3 online, video converter, online audio extractor, free mp3 converter">
  <meta name="author" content="Prabin's Toolbox">
  <link rel="canonical" href="https://www.prabinpokhrel1.com.np/video-to-mp3.html">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Video to MP3 Converter | Free Online Audio Extractor - Prabin's Toolbox">
  <meta property="og:description" content="Easily convert any video file into MP3 audio in your browser — 100% free and secure.">
  <meta property="og:image" content="https://www.prabinpokhrel1.com.np/assets/video-to-mp3-preview.png">
  <meta property="og:url" content="https://www.prabinpokhrel1.com.np/video-to-mp3.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="All-in-One Tools by Prabin">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Free Video to MP3 Converter - Prabin's Toolbox">
  <meta name="twitter:description" content="Convert videos to MP3 online with no watermark, no signup, and full privacy.">
  <meta name="twitter:image" content="https://www.prabinpokhrel1.com.np/assets/video-to-mp3-preview.png">
  <meta name="twitter:creator" content="@prabinpokhrel">
  
  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- FFmpeg.wasm - Multiple CDN options -->
  <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.6/dist/ffmpeg.min.js"></script>
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Video to MP3 Converter",
    "description": "Convert video to MP3 instantly with Prabin's Toolbox. Extract high-quality audio from videos online for free — no signup or software required.",
    "url": "https://www.prabinpokhrel1.com.np/video-to-mp3.html",
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "Any",
    "permissions": "none",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Person",
      "name": "Prabin Pokhrel"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Prabin's Toolbox"
    }
  }
  </script>
   <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7081789084626782"
     crossorigin="anonymous"></script>
  
  <style>
    /* --------- RESET & VARIABLES --------- */
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
      font-family: "Poppins", sans-serif; 
      transition: background-color 0.3s, color 0.3s;
    }

    :root {
      --primary: #38bdf8;
      --primary-dark: #0ea5e9;
      --secondary: #f472b6;
      --accent: #a78bfa;
      --bg: #0f172a;
      --bg-light: #1e293b;
      --bg-lighter: #334155;
      --text: #f1f5f9;
      --text-muted: #94a3b8;
      --card-bg: rgba(255, 255, 255, 0.05);
      --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --border: rgba(255, 255, 255, 0.1);
      --success: #10b981;
      --error: #ef4444;
    }

    .light-mode {
      --bg: #f8fafc;
      --bg-light: #e2e8f0;
      --bg-lighter: #cbd5e1;
      --text: #0f172a;
      --text-muted: #475569;
      --card-bg: rgba(255, 255, 255, 0.8);
      --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
      --border: rgba(0, 0, 0, 0.1);
    }

    body {
      background: linear-gradient(135deg, var(--bg), var(--bg-light));
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background 0.5s ease;
      padding: 0 1rem;
    }

    /* --------- HEADER & NAVIGATION --------- */
    header {
      width: 100%;
      padding: 1.5rem 1rem;
      text-align: center;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
      position: relative;
      z-index: 100;
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo i {
      font-size: 2.5rem;
      color: var(--primary);
      animation: rotate 10s linear infinite;
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .logo h1 {
      font-size: 2rem;
      color: var(--primary);
      letter-spacing: 1px;
    }

    .logo p {
      margin-top: 0.5rem;
      color: var(--text-muted);
      font-size: 1rem;
    }

    .theme-toggle {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 50px;
      width: 60px;
      height: 30px;
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      padding: 0 5px;
      transition: all 0.3s ease;
    }

    .theme-toggle:hover {
      transform: scale(1.05);
    }

    .theme-toggle i {
      position: absolute;
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }

    .theme-toggle .fa-sun {
      color: #f59e0b;
      opacity: 0;
    }

    .theme-toggle .fa-moon {
      color: #94a3b8;
    }

    .light-mode .theme-toggle .fa-sun {
      opacity: 1;
    }

    .light-mode .theme-toggle .fa-moon {
      opacity: 0;
    }

    .theme-toggle::after {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--primary);
      transition: all 0.3s ease;
      left: 4px;
    }

    .light-mode .theme-toggle::after {
      left: calc(100% - 26px);
      background: #f59e0b;
    }

    /* --------- MAIN CONTENT --------- */
    main {
      max-width: 1200px;
      width: 100%;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .tool-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--card-shadow);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      margin-bottom: 2rem;
      animation: fadeIn 0.8s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .card-header h1 {
      font-size: 1.8rem;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }

    .card-header p {
      color: var(--text-muted);
    }

    .card-header i {
      font-size: 3rem;
      color: var(--primary);
      margin-bottom: 1rem;
    }

    /* --------- UPLOAD AREA --------- */
    .upload-area {
      border: 2px dashed var(--border);
      border-radius: 10px;
      padding: 3rem 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 2rem;
      background: var(--bg-light);
    }

    .upload-area:hover {
      border-color: var(--primary);
      background: var(--bg-lighter);
    }

    .upload-area.active {
      border-color: var(--success);
      background: rgba(16, 185, 129, 0.1);
    }

    .upload-icon {
      font-size: 3rem;
      color: var(--primary);
      margin-bottom: 1rem;
    }

    .upload-text h3 {
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
      color: var(--text);
    }

    .upload-text p {
      color: var(--text-muted);
      margin-bottom: 1rem;
    }

    .upload-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .upload-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
    }

    .upload-btn:disabled {
      background: var(--bg-lighter);
      color: var(--text-muted);
      cursor: not-allowed;
      transform: none;
    }

    .upload-btn:disabled:hover {
      background: var(--bg-lighter);
      transform: none;
    }

    #fileInput {
      display: none;
    }

    .file-info {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    /* --------- FILE INFO SECTION --------- */
    .file-info-section {
      display: none;
      margin-bottom: 2rem;
    }

    .file-info-section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .section-title {
      font-size: 1.3rem;
      color: var(--primary);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .file-details {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 1.5rem;
      border: 1px solid var(--border);
    }

    .file-details-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
    }

    .file-detail {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .file-detail label {
      font-weight: 500;
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .file-detail span {
      color: var(--text);
      font-size: 1rem;
    }

    /* --------- OPTIONS SECTION --------- */
    .options-section {
      display: none;
      margin-bottom: 2rem;
    }

    .options-section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
    }

    .option-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .option-group label {
      font-weight: 500;
      color: var(--text);
    }

    .option-group select,
    .option-group input {
      padding: 0.8rem;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--bg-light);
      color: var(--text);
    }

    /* --------- FFMPEG LOADING STATUS --------- */
    .ffmpeg-status {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 1.5rem;
      border: 1px solid var(--border);
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .ffmpeg-status.active {
      display: block;
    }

    .ffmpeg-status .status-text {
      margin-bottom: 1rem;
      font-size: 1rem;
    }

    .ffmpeg-status .status-detail {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .retry-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 1.2rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
      margin-top: 1rem;
    }

    .retry-btn:hover {
      background: var(--primary-dark);
    }

    /* --------- CONVERSION SECTION --------- */
    .conversion-section {
      display: none;
      margin-bottom: 2rem;
      text-align: center;
    }

    .conversion-section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .progress-container {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 2rem;
      border: 1px solid var(--border);
      margin-bottom: 1.5rem;
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .progress-label {
      font-weight: 500;
      color: var(--text);
    }

    .progress-percentage {
      color: var(--primary);
      font-weight: 600;
    }

    .progress-bar {
      height: 10px;
      background: var(--bg-lighter);
      border-radius: 5px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--primary);
      border-radius: 5px;
      width: 0%;
      transition: width 0.3s ease;
    }

    .converting-text {
      margin-top: 1rem;
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* --------- RESULT SECTION --------- */
    .result-section {
      display: none;
      text-align: center;
    }

    .result-section.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .result-container {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 2rem;
      border: 1px solid var(--border);
      margin-bottom: 1.5rem;
    }

    .audio-preview {
      width: 100%;
      margin-bottom: 1.5rem;
    }

    .audio-preview audio {
      width: 100%;
      max-width: 400px;
    }

    .download-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin-top: 1.5rem;
    }

    .download-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .download-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
    }

    .download-btn.secondary {
      background: var(--bg-light);
      color: var(--text);
    }

    .download-btn.secondary:hover {
      background: var(--bg-lighter);
    }

    /* --------- CONTENT SECTIONS --------- */
    .content-section {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--card-shadow);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      margin-bottom: 2rem;
    }

    .content-section h2 {
      font-size: 1.5rem;
      color: var(--primary);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .content-section h3 {
      font-size: 1.2rem;
      color: var(--secondary);
      margin: 1.5rem 0 0.5rem;
    }

    .content-section p {
      color: var(--text);
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .content-section ul {
      padding-left: 1.5rem;
      margin-bottom: 1rem;
    }

    .content-section li {
      color: var(--text);
      line-height: 1.6;
      margin-bottom: 0.5rem;
    }

    .faq-item {
      margin-bottom: 1.5rem;
      border-bottom: 1px solid var(--border);
      padding-bottom: 1.5rem;
    }

    .faq-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .tool-links {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
    }

    .tool-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1.5rem;
      background: var(--card-bg);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .tool-link:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-3px);
    }

    /* --------- BACK BUTTON --------- */
    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1.5rem;
      background: var(--card-bg);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      margin-top: 1rem;
    }

    .back-btn:hover {
      background: var(--primary);
      color: white;
      transform: translateX(-5px);
    }

    /* --------- FOOTER --------- */
    footer {
      padding: 2rem 1rem;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.9rem;
      border-top: 1px solid var(--border);
      width: 100%;
      margin-top: auto;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }

    .footer-links {
      display: flex;
      gap: 2rem;
      margin-top: 1rem;
    }

    .footer-links a {
      color: var(--text-muted);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: var(--primary);
    }

    /* --------- RESPONSIVE DESIGN --------- */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 1rem;
      }

      .file-details-grid {
        grid-template-columns: 1fr;
      }

      .options-grid {
        grid-template-columns: 1fr;
      }

      .download-buttons {
        flex-direction: column;
        align-items: center;
      }

      .download-btn {
        width: 100%;
        max-width: 300px;
      }
    }

    @media (max-width: 480px) {
      .footer-links {
        flex-direction: column;
        gap: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="logo">
        <i class="fas fa-toolbox" aria-hidden="true"></i>
        <div>
          <h1>All-in-One Tools</h1>
          <p>50+ useful tools for your everyday needs</p>
        </div>
      </div>
      <div class="theme-toggle" id="themeToggle" aria-label="Toggle dark/light mode" role="button" tabindex="0">
        <i class="fas fa-sun" aria-hidden="true"></i>
        <i class="fas fa-moon" aria-hidden="true"></i>
      </div>
    </div>
  </header>

  <main>
    <article>
      <div class="tool-card">
        <div class="card-header">
          <i class="fas fa-file-audio" aria-hidden="true"></i>
          <h1>Video to MP3 Converter</h1>
          <p>Extract high-quality audio from your videos in seconds</p>
        </div>

        <!-- FFmpeg Loading Status -->
        <div class="ffmpeg-status active" id="ffmpegStatus">
          <div class="status-text">
            <i class="fas fa-sync fa-spin"></i> Loading FFmpeg...
          </div>
          <div class="status-detail" id="ffmpegDetail">
            Please wait 10-20 seconds while FFmpeg loads. This only happens once per session.
          </div>
        </div>

        <!-- Upload Section -->
        <div class="upload-area" id="uploadArea">
          <div class="upload-icon">
            <i class="fas fa-cloud-upload-alt"></i>
          </div>
          <div class="upload-text">
            <h3>Upload Your Video</h3>
            <p>Drag & drop your video file here or click to browse</p>
            <p class="file-info">Supports: MP4, WebM, MOV, AVI (Max: 100MB)</p>
          </div>
          <button class="upload-btn" id="uploadBtn">
            <i class="fas fa-folder-open"></i> Choose Video File
          </button>
          <input type="file" id="fileInput" accept=".mp4,.webm,.mov,.avi,.mkv">
        </div>

        <!-- File Info Section -->
        <div class="file-info-section" id="fileInfoSection">
          <h2 class="section-title">
            <i class="fas fa-info-circle"></i> Video Details
          </h2>
          <div class="file-details">
            <div class="file-details-grid">
              <div class="file-detail">
                <label>File Name</label>
                <span id="fileName">-</span>
              </div>
              <div class="file-detail">
                <label>File Size</label>
                <span id="fileSize">-</span>
              </div>
              <div class="file-detail">
                <label>Duration</label>
                <span id="fileDuration">-</span>
              </div>
              <div class="file-detail">
                <label>Format</label>
                <span id="fileFormat">-</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Options Section -->
        <div class="options-section" id="optionsSection">
          <h2 class="section-title">
            <i class="fas fa-cog"></i> Conversion Options
          </h2>
          <div class="options-grid">
            <div class="option-group">
              <label for="audioQuality">Audio Quality</label>
              <select id="audioQuality">
                <option value="128">Standard (128 kbps)</option>
                <option value="192" selected>Good (192 kbps)</option>
                <option value="256">High (256 kbps)</option>
                <option value="320">Best (320 kbps)</option>
              </select>
            </div>
            <div class="option-group">
              <label for="outputFormat">Output Format</label>
              <select id="outputFormat">
                <option value="mp3" selected>MP3</option>
                <option value="wav">WAV</option>
                <option value="ogg">OGG</option>
                <option value="m4a">M4A</option>
              </select>
            </div>
            <div class="option-group">
              <label for="trimStart">Trim Start (seconds)</label>
              <input type="number" id="trimStart" min="0" value="0">
            </div>
            <div class="option-group">
              <label for="trimEnd">Trim End (seconds)</label>
              <input type="number" id="trimEnd" min="0" value="0">
            </div>
          </div>
          <button class="upload-btn" id="convertBtn" style="margin-top: 1.5rem;" disabled>
            <i class="fas fa-sync fa-spin"></i> Loading FFmpeg...
          </button>
        </div>

        <!-- Conversion Section -->
        <div class="conversion-section" id="conversionSection">
          <h2 class="section-title">
            <i class="fas fa-sync fa-spin"></i> Converting Video
          </h2>
          <div class="progress-container">
            <div class="progress-info">
              <span class="progress-label">Conversion Progress</span>
              <span class="progress-percentage" id="progressPercentage">0%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="converting-text" id="convertingText">Initializing FFmpeg...</p>
          </div>
        </div>

        <!-- Result Section -->
        <div class="result-section" id="resultSection">
          <h2 class="section-title">
            <i class="fas fa-check-circle"></i> Conversion Complete
          </h2>
          <div class="result-container">
            <div class="audio-preview">
              <audio id="audioPreview" controls>
                Your browser does not support the audio element.
              </audio>
            </div>
            <p>Your audio file is ready! Preview it above and download when ready.</p>
          </div>
          <div class="download-buttons">
            <button class="download-btn" id="downloadBtn">
              <i class="fas fa-download"></i> Download Audio
            </button>
            <button class="download-btn secondary" id="convertAnotherBtn">
              <i class="fas fa-redo"></i> Convert Another
            </button>
          </div>
        </div>

        <a href="index.html" class="back-btn">
          <i class="fas fa-arrow-left" aria-hidden="true"></i> Back to Home
        </a>
      </div>
    </article>

    <section class="content-section">
      <h2><i class="fas fa-info-circle" aria-hidden="true"></i> About This Video to MP3 Converter</h2>
      <p>Our Free Video to MP3 Converter is a powerful online tool that allows you to extract audio from video files with high quality and precision. Whether you want to save audio from music videos, podcasts, or any other video content, this tool makes it easy and efficient.</p>
      
      <h3>How to Use the Video to MP3 Converter</h3>
      <p>Converting your video to MP3 is simple:</p>
      <ul>
        <li>Upload your video file by dragging and dropping or using the file browser</li>
        <li>Review the video details and adjust conversion options if needed</li>
        <li>Click "Convert to Audio" to start the extraction process</li>
        <li>Wait for the conversion to complete (this may take a few moments)</li>
        <li>Preview the extracted audio and download it in MP3 format</li>
      </ul>
      
      <h3>Key Features</h3>
      <p>Our video to MP3 converter offers a comprehensive set of features:</p>
      <ul>
        <li><strong>Multiple Format Support:</strong> Convert from MP4, WebM, MOV, AVI, and more</li>
        <li><strong>Quality Options:</strong> Choose from 128kbps to 320kbps audio quality</li>
        <li><strong>Format Options:</strong> Output to MP3, WAV, OGG, or M4A formats</li>
        <li><strong>Trimming Capability:</strong> Trim the start and end of your audio</li>
        <li><strong>Live Preview:</strong> Listen to your converted audio before downloading</li>
        <li><strong>Privacy Focused:</strong> All processing happens in your browser - no server uploads</li>
      </ul>
      
      <h3>Other Useful Tools</h3>
      <p>Explore more helpful utilities in our toolbox:</p>
      <div class="tool-links">
        <a href="image-cropper.html" class="tool-link" aria-label="Image Cropper">
          <i class="fas fa-crop-alt" aria-hidden="true"></i> Image Cropper
        </a>
        <a href="favicon-generator.html" class="tool-link" aria-label="Favicon Generator">
          <i class="fas fa-icons" aria-hidden="true"></i> Favicon Generator
        </a>
        <a href="logo-maker.html" class="tool-link" aria-label="Logo Maker">
          <i class="fas fa-pen-fancy" aria-hidden="true"></i> Logo Maker
        </a>
        <a href="index.html" class="tool-link" aria-label="All Tools">
          <i class="fas fa-tools" aria-hidden="true"></i> All Tools
        </a>
      </div>
    </section>

    <section class="content-section">
      <h2><i class="fas fa-question-circle" aria-hidden="true"></i> Frequently Asked Questions</h2>
      
      <div class="faq-item">
        <h3>What video formats can I convert with this tool?</h3>
        <p>You can upload MP4, WebM, MOV, AVI, and MKV video files. The tool will extract the audio and convert it to your chosen audio format (MP3, WAV, OGG, or M4A).</p>
      </div>
      
      <div class="faq-item">
        <h3>Is there a file size limit for uploaded videos?</h3>
        <p>The maximum file size for uploads is 100MB. For best results, we recommend using videos that are under 10 minutes in length for faster conversion.</p>
      </div>
      
      <div class="faq-item">
        <h3>How long does the conversion process take?</h3>
        <p>Conversion time depends on the length and size of your video file. A typical 5-minute video takes about 30-60 seconds to convert. The progress bar will show you the current status.</p>
      </div>
      
      <div class="faq-item">
        <h3>Does the converter work on mobile devices?</h3>
        <p>Yes, our video to MP3 converter is fully responsive and works on all devices including smartphones and tablets. However, processing large files on mobile devices may be slower.</p>
      </div>
      
      <div class="faq-item">
        <h3>Are my videos uploaded to a server?</h3>
        <p>No, all video processing happens directly in your browser using FFmpeg.wasm. Your videos are never uploaded to any server, ensuring complete privacy and security.</p>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <p>© 2025 Prabin's Toolbox | All Rights Reserved</p>
      <div class="footer-links">
        <a href="privacy-policy.html">Privacy Policy</a>
        <a href="terms-of-service.html">Terms of Service</a>
        <a href="contact.html">Contact Us</a>
      </div>
    </div>
  </footer>

  <script>
    // ---------- DOM ELEMENTS ----------
    const uploadArea = document.getElementById('uploadArea');
    const uploadBtn = document.getElementById('uploadBtn');
    const fileInput = document.getElementById('fileInput');
    const fileInfoSection = document.getElementById('fileInfoSection');
    const optionsSection = document.getElementById('optionsSection');
    const conversionSection = document.getElementById('conversionSection');
    const resultSection = document.getElementById('resultSection');
    const fileName = document.getElementById('fileName');
    const fileSize = document.getElementById('fileSize');
    const fileDuration = document.getElementById('fileDuration');
    const fileFormat = document.getElementById('fileFormat');
    const convertBtn = document.getElementById('convertBtn');
    const progressPercentage = document.getElementById('progressPercentage');
    const progressFill = document.getElementById('progressFill');
    const convertingText = document.getElementById('convertingText');
    const audioPreview = document.getElementById('audioPreview');
    const downloadBtn = document.getElementById('downloadBtn');
    const convertAnotherBtn = document.getElementById('convertAnotherBtn');
    const audioQuality = document.getElementById('audioQuality');
    const outputFormat = document.getElementById('outputFormat');
    const trimStart = document.getElementById('trimStart');
    const trimEnd = document.getElementById('trimEnd');
    const ffmpegStatus = document.getElementById('ffmpegStatus');
    const ffmpegDetail = document.getElementById('ffmpegDetail');

    // ---------- VARIABLES ----------
    let uploadedFile = null;
    let videoDuration = 0;
    let convertedAudioUrl = null;
    let ffmpeg = null;
    let isFFmpegLoaded = false;
    let retryCount = 0;
    const MAX_RETRIES = 3;

    // ---------- EVENT LISTENERS ----------
    function initializeEventListeners() {
      // Upload button click
      uploadBtn.addEventListener('click', () => fileInput.click());
      
      // File input change
      fileInput.addEventListener('change', handleFileUpload);
      
      // Drag and drop
      uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('active');
      });
      
      uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('active');
      });
      
      uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('active');
        
        if (e.dataTransfer.files.length) {
          fileInput.files = e.dataTransfer.files;
          handleFileUpload();
        }
      });
      
      // Convert button
      convertBtn.addEventListener('click', convertVideoToAudio);
      
      // Download button
      downloadBtn.addEventListener('click', downloadAudio);
      
      // Convert another button
      convertAnotherBtn.addEventListener('click', resetConverter);
      
      // Initialize FFmpeg
      initializeFFmpeg();
    }

    // ---------- FFMPEG INITIALIZATION ----------
    async function initializeFFmpeg() {
      try {
        // Check if FFmpeg is available
        if (typeof FFmpeg === 'undefined') {
          throw new Error('FFmpeg library not loaded. Check your internet connection.');
        }
        
        // Update status message
        ffmpegStatus.querySelector('.status-text').innerHTML = '<i class="fas fa-sync fa-spin"></i> Loading FFmpeg...';
        ffmpegDetail.textContent = `Please wait 10-20 seconds while FFmpeg loads. (Attempt ${retryCount + 1}/${MAX_RETRIES + 1})`;
        
        // Remove any existing retry button
        const existingRetryBtn = document.getElementById('retryBtn');
        if (existingRetryBtn) {
          existingRetryBtn.remove();
        }
        
        // Create FFmpeg instance with proper configuration
        const { createFFmpeg, fetchFile } = FFmpeg;
        
        // Use minimal configuration to reduce loading issues
        ffmpeg = createFFmpeg({ 
          log: false,
          corePath: 'https://unpkg.com/@ffmpeg/core-st@0.11.1/dist/ffmpeg-core.js',
          wasmPath: 'https://unpkg.com/@ffmpeg/core-st@0.11.1/dist/ffmpeg-core.wasm'
        });
        
        // Set a timeout for FFmpeg loading
        const loadPromise = ffmpeg.load();
        const timeoutPromise = new Promise((_, reject) => {
          setTimeout(() => reject(new Error('FFmpeg loading timeout. Please check your internet connection.')), 45000);
        });
        
        // Wait for FFmpeg to load with timeout
        await Promise.race([loadPromise, timeoutPromise]);
        
        isFFmpegLoaded = true;
        retryCount = 0;
        
        // Update UI to show FFmpeg is ready
        ffmpegStatus.querySelector('.status-text').innerHTML = '<i class="fas fa-check-circle" style="color: var(--success)"></i> FFmpeg Loaded Successfully!';
        ffmpegDetail.textContent = 'You can now upload and convert your videos.';
        
        // Enable convert button and update text
        convertBtn.disabled = false;
        convertBtn.innerHTML = '<i class="fas fa-bolt"></i> Convert to Audio';
        
        // Hide FFmpeg status after a delay
        setTimeout(() => {
          ffmpegStatus.style.display = 'none';
        }, 3000);
        
        console.log('FFmpeg loaded successfully');
      } catch (error) {
        console.error('Error loading FFmpeg:', error);
        retryCount++;
        
        if (retryCount <= MAX_RETRIES) {
          ffmpegStatus.querySelector('.status-text').innerHTML = '<i class="fas fa-exclamation-triangle" style="color: var(--error)"></i> Failed to Load FFmpeg';
          ffmpegDetail.textContent = `Error: ${error.message}. Retrying... (${retryCount}/${MAX_RETRIES})`;
          
          // Retry after a delay
          setTimeout(initializeFFmpeg, 2000);
        } else {
          // Final failure
          ffmpegStatus.querySelector('.status-text').innerHTML = '<i class="fas fa-exclamation-triangle" style="color: var(--error)"></i> Failed to Load FFmpeg';
          ffmpegDetail.textContent = `Error: ${error.message}. Please refresh the page or try again later.`;
          
          // Add retry button
          const retryBtn = document.createElement('button');
          retryBtn.id = 'retryBtn';
          retryBtn.className = 'retry-btn';
          retryBtn.innerHTML = '<i class="fas fa-redo"></i> Retry Loading FFmpeg';
          retryBtn.addEventListener('click', () => {
            retryCount = 0;
            initializeFFmpeg();
          });
          
          ffmpegStatus.appendChild(retryBtn);
          
          convertBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> FFmpeg Failed to Load';
        }
      }
    }

    // ---------- FILE UPLOAD ----------
    function handleFileUpload() {
      const file = fileInput.files[0];
      
      if (!file) return;
      
      // Check file type
      const validTypes = ['video/mp4', 'video/webm', 'video/quicktime', 'video/x-msvideo', 'video/x-matroska'];
      if (!validTypes.includes(file.type)) {
        alert('Please upload a valid video file (MP4, WebM, MOV, AVI, or MKV).');
        return;
      }
      
      // Check file size (100MB max)
      if (file.size > 100 * 1024 * 1024) {
        alert('File size must be less than 100MB.');
        return;
      }
      
      uploadedFile = file;
      
      // Get video duration
      getVideoDuration(file).then(duration => {
        videoDuration = duration;
        
        // Update file info
        updateFileInfo(file, duration);
        
        // Show file info and options sections
        fileInfoSection.classList.add('active');
        optionsSection.classList.add('active');
        
        // Update upload area text
        const uploadText = uploadArea.querySelector('.upload-text h3');
        uploadText.textContent = 'Video Uploaded Successfully!';
        uploadArea.querySelector('.upload-text p').textContent = 'Your video is ready for conversion';
      }).catch(error => {
        console.error('Error getting video duration:', error);
        // Still show the file info with unknown duration
        updateFileInfo(file, 0);
        fileInfoSection.classList.add('active');
        optionsSection.classList.add('active');
        
        const uploadText = uploadArea.querySelector('.upload-text h3');
        uploadText.textContent = 'Video Uploaded Successfully!';
        uploadArea.querySelector('.upload-text p').textContent = 'Your video is ready for conversion';
      });
    }

    function getVideoDuration(file) {
      return new Promise((resolve, reject) => {
        const video = document.createElement('video');
        video.preload = 'metadata';
        
        video.onloadedmetadata = function() {
          window.URL.revokeObjectURL(video.src);
          resolve(video.duration);
        };
        
        video.onerror = function() {
          reject(new Error('Failed to load video metadata'));
        };
        
        video.src = URL.createObjectURL(file);
      });
    }

    function updateFileInfo(file, duration) {
      fileName.textContent = file.name;
      fileSize.textContent = formatFileSize(file.size);
      fileDuration.textContent = formatDuration(duration);
      fileFormat.textContent = file.type.split('/')[1].toUpperCase();
      
      // Set max values for trim inputs
      trimEnd.max = Math.floor(duration);
      trimEnd.value = Math.floor(duration);
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    function formatDuration(seconds) {
      if (seconds === 0) return 'Unknown';
      
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    // ---------- VIDEO CONVERSION ----------
    async function convertVideoToAudio() {
      if (!uploadedFile || !isFFmpegLoaded) {
        alert('Please upload a video file and wait for FFmpeg to load.');
        return;
      }
      
      // Show conversion section
      conversionSection.classList.add('active');
      optionsSection.classList.remove('active');
      
      try {
        // Reset progress
        updateProgress(0, 'Starting conversion...');
        
        // Write the video file to FFmpeg's virtual file system
        const inputName = 'input.' + uploadedFile.name.split('.').pop();
        const outputName = 'output.' + outputFormat.value;
        
        updateProgress(10, 'Reading video file...');
        const { fetchFile } = FFmpeg;
        ffmpeg.FS('writeFile', inputName, await fetchFile(uploadedFile));
        
        updateProgress(20, 'Processing video file...');
        
        // Build FFmpeg command
        const quality = audioQuality.value;
        const startTime = parseFloat(trimStart.value) || 0;
        const endTime = parseFloat(trimEnd.value) || videoDuration;
        let duration = endTime - startTime;
        
        if (duration <= 0) {
          duration = videoDuration;
        }
        
        let ffmpegArgs = [
          '-i', inputName,
          '-vn', // No video
          '-ac', '2', // Stereo audio
          '-ar', '44100', // Sample rate
        ];
        
        // Add trim options if specified
        if (startTime > 0) {
          ffmpegArgs.push('-ss', startTime.toString());
        }
        
        if (endTime < videoDuration) {
          ffmpegArgs.push('-t', duration.toString());
        }
        
        // Add quality/format specific options
        if (outputFormat.value === 'mp3') {
          ffmpegArgs.push('-b:a', `${quality}k`, '-f', 'mp3');
        } else if (outputFormat.value === 'wav') {
          ffmpegArgs.push('-f', 'wav');
        } else if (outputFormat.value === 'ogg') {
          ffmpegArgs.push('-c:a', 'libvorbis', '-f', 'ogg');
        } else if (outputFormat.value === 'm4a') {
          ffmpegArgs.push('-c:a', 'aac', '-b:a', `${quality}k`, '-f', 'ipod');
        }
        
        ffmpegArgs.push(outputName);
        
        updateProgress(30, 'Converting video to audio...');
        
        // Execute FFmpeg command
        await ffmpeg.run(...ffmpegArgs);
        
        updateProgress(80, 'Finalizing audio file...');
        
        // Read the output file
        const data = ffmpeg.FS('readFile', outputName);
        
        updateProgress(95, 'Creating download link...');
        
        // Create blob URL for the audio
        const audioBlob = new Blob([data.buffer], { 
          type: outputFormat.value === 'mp3' ? 'audio/mpeg' : 
                outputFormat.value === 'wav' ? 'audio/wav' :
                outputFormat.value === 'ogg' ? 'audio/ogg' : 'audio/mp4'
        });
        
        convertedAudioUrl = URL.createObjectURL(audioBlob);
        
        // Set audio preview source
        audioPreview.src = convertedAudioUrl;
        
        updateProgress(100, 'Conversion complete!');
        
        // Show result section after a short delay
        setTimeout(() => {
          conversionSection.classList.remove('active');
          resultSection.classList.add('active');
        }, 1000);
        
      } catch (error) {
        console.error('Conversion error:', error);
        updateProgress(0, `Conversion failed: ${error.message}`);
        alert('Conversion failed. Please try again with a different video file.');
      }
    }

    function updateProgress(percent, message) {
      progressPercentage.textContent = `${percent}%`;
      progressFill.style.width = `${percent}%`;
      convertingText.textContent = message;
    }

    // ---------- DOWNLOAD FUNCTIONS ----------
    function downloadAudio() {
      if (!convertedAudioUrl) return;
      
      const link = document.createElement('a');
      link.href = convertedAudioUrl;
      link.download = `converted-audio.${outputFormat.value}`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    function resetConverter() {
      // Reset all sections
      fileInfoSection.classList.remove('active');
      optionsSection.classList.remove('active');
      conversionSection.classList.remove('active');
      resultSection.classList.remove('active');
      
      // Reset file input
      fileInput.value = '';
      uploadedFile = null;
      
      // Reset upload area text
      const uploadText = uploadArea.querySelector('.upload-text h3');
      uploadText.textContent = 'Upload Your Video';
      uploadArea.querySelector('.upload-text p').textContent = 'Drag & drop your video file here or click to browse';
      
      // Clear converted audio URL
      if (convertedAudioUrl) {
        URL.revokeObjectURL(convertedAudioUrl);
        convertedAudioUrl = null;
      }
      
      // Reset audio preview
      audioPreview.src = '';
      
      // Reset progress
      updateProgress(0, 'Initializing FFmpeg...');
    }

    // ---------- THEME TOGGLE ----------
    const themeToggle = document.getElementById("themeToggle");
    const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");
    
    // Check for saved theme preference or use device preference
    const currentTheme = localStorage.getItem("theme") || 
                        (prefersDarkScheme.matches ? "dark" : "light");
    
    if (currentTheme === "light") {
      document.body.classList.add("light-mode");
    }
    
    themeToggle.addEventListener("click", () => {
      document.body.classList.toggle("light-mode");
      
      // Save theme preference
      const theme = document.body.classList.contains("light-mode") ? "light" : "dark";
      localStorage.setItem("theme", theme);
    });
    
    themeToggle.addEventListener("keypress", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        document.body.classList.toggle("light-mode");
        
        // Save theme preference
        const theme = document.body.classList.contains("light-mode") ? "light" : "dark";
        localStorage.setItem("theme", theme);
      }
    });

    // ---------- INITIALIZATION ----------
    function initializeVideoConverter() {
      initializeEventListeners();
    }

    // Initialize the video converter when the page loads
    document.addEventListener('DOMContentLoaded', initializeVideoConverter);
  </script>
</body>
</html>